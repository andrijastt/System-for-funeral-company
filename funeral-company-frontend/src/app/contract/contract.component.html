<app-main-nav>
    <br>
    <div class="row justify-content-center align-items-center g-2-x">                
        <fieldset class="mb-3 row">
            <legend class="col">Serach options</legend>                    
        </fieldset>
        <!-- <div class="col-4">            
            <div class="d-grid gap-2">
                <mat-form-field>
                    <mat-label for="inputName" class="col">Model name</mat-label>
                    <input type="text" matInput [(ngModel)]="nameSearch">
                </mat-form-field>    
            </div>            
        </div>            
        <div class="col">
            <div class="d-grid gap-2">
                <button type="button" class="btn btn-primary" (click)="getAllModels()">Get All Models</button>   
            </div>            
        </div> -->
        <div class="col">
            <div class="d-grid gap-2">
                <button type="button" class="btn btn-primary" (click)="this.addContract = true">Add Contract</button>   
            </div>            
        </div>
        <!-- <div class="col">
            <div class="d-grid gap-2">
              <button type="button" name="" id="" class="btn btn-primary" (click)="search()">Search</button>
            </div>
        </div> -->
    </div>
    <div class="table-responsive-lg">
        <table class="table table-striped
        table-hover	
        table-bordered
        table-primary
        align-middle">
            <thead class="table-light">
                <caption>Contract</caption>
                <tr>
                    <th>ContractID</th>
                    <th>Client</th>
                    <th>Date signed</th>
                    <th>Payment date</th>
                    <th>Valid untill</th>
                    <th>Money</th>
                    <th>Currency</th>
                    <th>Valid</th>                    
                    <th>Update</th>
                    <th>Remove</th>
                </tr>
                </thead>
                <tbody class="table-group-divider">
                    <tr class="table-primary" *ngFor="let contract of contracts">
                        <td scope="row">{{contract.contractID}}</td>
                        <td scope="row">{{contract.client.name}}</td>
                        <td scope="row">{{contract.dateSigned}}</td>
                        <td scope="row">{{contract.paymentDate}}</td>
                        <td scope="row">{{contract.validUntil}}</td>
                        <td scope="row">{{contract.money}}</td>
                        <td scope="row">{{contract.currency}}</td>
                        <td scope="row">{{contract.valid}}</td>
                        <td scope="row">
                            <button type="button" class="btn btn-primary">Update Model</button>
                        </td>
                        <td scope="row">
                            <button type="button" class="btn btn-primary">Remove Model</button>
                        </td>
                    </tr>                    
                </tbody>
                <tfoot>
                    
                </tfoot>
        </table>        
    </div>
    <div class="container" *ngIf="addContract">                
        <form>
            <fieldset class="mb-3 row">
                <legend class="col-form-legend col-5">Add new Contract</legend>                    
            </fieldset>
            <div class="mb-3 row">
                <mat-form-field>
                    <mat-label for="inputName" class="col-4 col-form-label">Client</mat-label>                                        
                    <mat-select name="client" id="category" [(ngModel)]="clientID">                        
                        <mat-option *ngFor="let client of clients" [value]="client">{{client.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="mb-3 row">
                <mat-form-field>
                    <mat-label for="inputName" class="col-4 col-form-label">Date signed</mat-label>                                        
                    <input matInput [matDatepicker]="dateSigned" [(ngModel)]="dateSignedData"
                    [max]="this.minMaxDate" class="form-control" name="dateSigned" id="dateSigned" required>
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matIconSuffix [for]="dateSigned"></mat-datepicker-toggle>
                    <mat-datepicker #dateSigned></mat-datepicker>
                </mat-form-field>            
            </div>
            <div class="mb-3 row">
                <mat-form-field>
                    <mat-label for="inputName" class="col-4 col-form-label">Payment date</mat-label>                                        
                    <input matInput [matDatepicker]="paymentDate" [(ngModel)]="paymentDateData"
                    [min]="this.minMaxDate" class="form-control" name="paymentDate" id="paymentDate" required>
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matIconSuffix [for]="paymentDate"></mat-datepicker-toggle>
                    <mat-datepicker #paymentDate></mat-datepicker>                                                    
                </mat-form-field>            
            </div>                        
            <div class="mb-3 row">
                <mat-form-field>
                    <mat-label for="inputName" class="col-4 col-form-label">Valid unitll</mat-label>                                        
                    <input matInput [matDatepicker]="valid" [(ngModel)]="validUntilData"
                    [min]="this.minMaxDate" class="form-control" name="valid" id="valid" required>
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matIconSuffix [for]="valid"></mat-datepicker-toggle>
                    <mat-datepicker #valid></mat-datepicker>                                                    
                </mat-form-field>
            </div>
            <div class="mb-3 row">
                <mat-form-field>
                    <mat-label for="inputName" class="col-4 col-form-label">Money</mat-label>                                        
                    <input matInput type="number" [(ngModel)]="money" min="0" class="form-control" name="money" id="money" required>                    
                </mat-form-field>
            </div>
            <div class="mb-3 row">
                <mat-form-field>
                    <mat-label for="inputName" class="col-4 col-form-label">Currency</mat-label>                                        
                    <input matInput [(ngModel)]="currency" type="text" class="form-control" name="currency" id="currency" required>                    
                </mat-form-field>
            </div>       
            <div class="mb-3 row">
                <div class="offset-sm-5 col-sm-8">
                    <button type="submit" mat-raised-button class="btn btn-primary" (click)="saveContract()">Add</button>
                </div>
            </div>     
            <div class="alert alert-primary" role="alert" *ngIf="dataNotFilled">
                <strong>Data not filled:</strong> Fill all data
            </div>            
        </form>
    </div>
</app-main-nav>